(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(12),i=n.n(o),c=n(13),r=n(6),l=n(3),u=n(5),d=n(2),b=s.a.createContext(),m=n.p+"static/media/logo.9acae848.svg",h=n(0);var p=function(e){var t=s.a.useContext(b);return Object(h.jsxs)("header",{className:"header page__header",children:[Object(h.jsx)(u.b,{to:"/",className:"header__logo",target:"_self",children:Object(h.jsx)("img",{src:m,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u041c\u0435\u0441\u0442\u043e"})}),Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{path:"/",element:Object(h.jsxs)("div",{className:"header__info",children:[Object(h.jsx)("p",{className:"header__status",children:t.email}),Object(h.jsx)(u.b,{to:"/",onClick:e.onLogout,className:"header__link",target:"_self",children:"\u0412\u044b\u0439\u0442\u0438"}),")"]})}),Object(h.jsx)(d.b,{path:"/signin",element:Object(h.jsx)(u.b,{to:"/signup",className:"header__status",target:"_self",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(h.jsx)(d.b,{path:"/signup",element:Object(h.jsx)(u.b,{to:"/signin",className:"header__status",target:"_self",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})};var j=function(e){var t=s.a.useContext(b),n=e.card.likes.some((function(e){return e._id===t._id})),a=e.card.owner._id===t._id;return Object(h.jsxs)("li",{className:"elements__element",children:[Object(h.jsx)("img",{src:e.card.link,className:"elements__image",alt:e.card.name,onClick:function(){e.onCardClick(e.card)}}),Object(h.jsxs)("div",{className:"elements__title",children:[Object(h.jsx)("h3",{className:"elements__text",children:e.card.name}),Object(h.jsxs)("div",{className:"elements__like-container",children:[Object(h.jsx)("button",{type:"button",className:n?"elements__like elements__like_active":"elements__like",onClick:function(){e.onCardLike(e.card)}}),Object(h.jsx)("p",{className:"elements__like-count",children:e.card.likes.length})]})]}),a&&Object(h.jsx)("button",{type:"button",className:"elements__trash-button",onClick:function(){e.onCardDelete(e.card)}})]})};var f=function(e){var t=s.a.useContext(b);return Object(h.jsxs)("main",{children:[Object(h.jsxs)("section",{className:"profile page__container",children:[Object(h.jsxs)("div",{className:"profile__avatar-overlay",children:[Object(h.jsx)("img",{src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",className:"profile__avatar"}),Object(h.jsx)("button",{className:"profile__edit-avatar-button",onClick:e.onEditAvatar})]}),Object(h.jsxs)("div",{className:"profile__info",children:[Object(h.jsx)("h1",{className:"profile__name",children:t.name}),Object(h.jsx)("button",{type:"button",className:"profile__edit-button",onClick:e.onEditProfile}),Object(h.jsx)("p",{className:"profile__title",children:t.about})]}),Object(h.jsx)("button",{type:"button",className:"profile__add-button",onClick:e.onAddPlace})]}),Object(h.jsx)("section",{children:Object(h.jsxs)("ul",{className:"elements page__elements",children:[e.cards.map((function(t){return Object(h.jsx)(j,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)})),";"]})})]})};var g=function(){var e=(new Date).getFullYear();return Object(h.jsx)("footer",{className:"footer page__footer",children:Object(h.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})};var O=function(e){s.a.useEffect((function(){var t=function(t){"Escape"===t.key&&e.onClose()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}));var t="popup popup_type_view ".concat(e.card.link.length?"popup_opened":"popup_hidden");return Object(h.jsx)("div",{className:t,onClick:function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.onClose()},children:Object(h.jsxs)("div",{className:"popup__container popup__container_image",children:[Object(h.jsx)("button",{type:"button",className:"popup__close-button",onClick:e.onClose}),Object(h.jsx)("img",{src:e.card.link,alt:e.card.name,className:"popup__image"}),Object(h.jsx)("h3",{className:"popup__image-text",children:e.card.name})]})})};var x=function(e){s.a.useEffect((function(){var t=function(t){"Escape"===t.key&&e.onClose()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}));var t="popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":"popup_hidden");return Object(h.jsx)("div",{className:t,onClick:function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.onClose()},children:Object(h.jsxs)("div",{className:"popup__container",children:[Object(h.jsx)("button",{type:"button",className:"popup__close-button",onClick:e.onClose}),Object(h.jsxs)("form",{className:"form",name:e.name,onSubmit:e.onSubmit,children:[Object(h.jsx)("h2",{className:"form__title",children:e.title}),e.children,Object(h.jsx)("button",{type:"submit",className:"form__save-button",children:e.isLoading?e.loadingText:e.buttonText})]})]})})};var v=function(e){var t=s.a.useContext(b),n=s.a.useState(""),a=Object(l.a)(n,2),o=a[0],i=a[1],c=s.a.useState(""),r=Object(l.a)(c,2),u=r[0],d=r[1];return s.a.useEffect((function(){i(t.name),d(t.about)}),[e.isOpen,t]),Object(h.jsxs)(x,{name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0430\u0439\u043b",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:u})},isLoading:e.isLoading,loadingText:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...",children:[Object(h.jsx)("input",{type:"text",className:"form__field",placeholder:"\u0418\u043c\u044f",name:"edit-profile-name",required:!0,minLength:"2",maxLength:"40",value:o||"",onChange:function(e){i(e.target.value)}}),Object(h.jsx)("span",{className:"form__error-message edit-profile-name-error"}),Object(h.jsx)("input",{type:"text",className:"form__field",placeholder:"\u041e \u0441\u0435\u0431\u0435",name:"edit-profile-title",required:!0,minLength:"2",maxLength:"200",value:u||"",onChange:function(e){d(e.target.value)}}),Object(h.jsx)("span",{className:"form__error-message edit-profile-title-error"})]})};var _=function(e){var t=s.a.useState({value:""}),n=Object(l.a)(t,2),a=n[0],o=n[1];return s.a.useEffect((function(){o({value:""})}),[e.isOpen]),Object(h.jsxs)(x,{name:"edit-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:a.value})},isLoading:e.isLoading,loadingText:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...",children:[Object(h.jsx)("input",{type:"url",className:"form__field",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"avatar-link",value:a.value,onChange:function(e){o({value:e.target.value})},required:!0}),Object(h.jsx)("span",{className:"form__error-message avatar-link-error"})]})};var C=function(e){var t=s.a.useState({value:""}),n=Object(l.a)(t,2),a=n[0],o=n[1],i=s.a.useState({value:""}),c=Object(l.a)(i,2),r=c[0],u=c[1];return s.a.useEffect((function(){o({value:""}),u({value:""})}),[e.isOpen]),Object(h.jsxs)(x,{name:"add-place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateCards({name:a.value,link:r.value})},isLoading:e.isLoading,loadingText:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f...",children:[Object(h.jsx)("input",{value:a.value,onChange:function(e){o({value:e.target.value})},type:"text",className:"form__field",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"add-place-name",required:!0,minLength:"2",maxLength:"30"}),Object(h.jsx)("span",{className:"form__error-message add-place-name-error"}),Object(h.jsx)("input",{value:r.value,onChange:function(e){u({value:e.target.value})},type:"url",className:"form__field",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"add-place-link",required:!0}),Object(h.jsx)("span",{className:"form__error-message add-place-link-error"})]})};var A=function(e){return Object(h.jsx)(x,{name:"with-confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onSubmit(e.cardToDelete)},isLoading:e.isLoading,loadingText:"\u0423\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f..."})};var k=function(e){var t="popup popup_type_tooltip ".concat(e.isOpen?"popup_opened":"popup_hidden");return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"popup__container",children:[Object(h.jsx)("button",{type:"button",className:"popup__close-button",onClick:e.onClose}),Object(h.jsx)("img",{className:"popup__tooltip-image",alt:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",src:e.status?"data:image/png;base64,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":"data:image/png;base64,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"}),Object(h.jsx)("p",{className:"popup__tooltip-text",children:e.status?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})};var y=function(e){var t=s.a.useState(""),n=Object(l.a)(t,2),a=n[0],o=n[1],i=s.a.useState(""),c=Object(l.a)(i,2),r=c[0],d=c[1];return Object(h.jsx)("div",{className:"auth",children:Object(h.jsx)("div",{className:"auth__container",children:Object(h.jsxs)("form",{className:"form",name:e.name,onSubmit:function(t){t.preventDefault(),e.handleSubmit({email:a,password:r})},children:[Object(h.jsx)("h2",{className:"form__title form__title_light auth__title",children:e.formTitleText}),Object(h.jsx)("input",{type:"email",className:"form__field form__field_light",placeholder:"Email",name:"login-email",required:!0,minLength:"2",maxLength:"40",value:a||"",onChange:function(e){o(e.target.value)}}),Object(h.jsx)("span",{className:"form__error-message login-email-error"}),Object(h.jsx)("input",{type:"password",className:"form__field form__field_light",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"login-password",required:!0,minLength:"2",maxLength:"200",value:r||"",onChange:function(e){d(e.target.value)}}),Object(h.jsx)("span",{className:"form__error-message login-password-error"}),Object(h.jsx)("button",{type:"submit",className:"form__save-button form__save-button_light auth__submit-button",children:e.formButtonText}),e.formAdditionalText&&Object(h.jsx)(u.b,{className:"auth__subtitle",to:"/signin",target:"_self",children:e.formAdditionalText})]})})})};var L=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(y,{name:e.name,handleSubmit:e.onLogin,formTitleText:"\u0412\u0445\u043e\u0434",formButtonText:"\u0412\u043e\u0439\u0442\u0438"})})};var N=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(y,{name:e.name,handleSubmit:e.onRegister,formTitleText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",formButtonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",formAdditionalText:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})})};var T=function(e){return e.isLoggedIn?e.children:Object(h.jsx)(d.a,{to:"./signin"})},E=n(9),I=n(10),w=new(function(){function e(t){Object(E.a)(this,e),this._baseUrl=t.baseUrl,this._headers={authorization:t.headers.authorization,"Content-Type":t.headers["Content-Type"]}}return Object(I.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"insertNewCard",value:function(e){return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"putLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}},{key:"deletePhoto",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"05e586ce-c0c8-4f14-bbd3-b259a470e2b4","Content-Type":"application/json"}}),S=new(function(){function e(t){Object(E.a)(this,e),this._baseUrl=t.baseUrl,this._headers={"Content-Type":t.headers["Content-Type"]}}return Object(I.a)(e,[{key:"login",value:function(e){return fetch("".concat(this._baseUrl,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({email:e.email,password:e.password})}).then(this._checkResponse)}},{key:"register",value:function(e){return fetch("".concat(this._baseUrl,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({email:e.email,password:e.password})}).then(this._checkResponse)}},{key:"user",value:function(){var e=localStorage.getItem("jwt");return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(this._checkResponse)}},{key:"logout",value:function(){localStorage.removeItem("jwt")}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e)}}]),e}())({baseUrl:"https://auth.nomoreparties.co",headers:{"Content-Type":"application/json"}}),B=n.p+"static/media/avatar.9d6adefb.png";var U=function(){var e=Object(d.g)(),t=s.a.useState(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],i=s.a.useState(!1),u=Object(l.a)(i,2),m=u[0],j=u[1],x=s.a.useState(!1),y=Object(l.a)(x,2),E=y[0],I=y[1],U=s.a.useState(!1),W=Object(l.a)(U,2),G=W[0],V=W[1],H=s.a.useState(!1),Q=Object(l.a)(H,2),R=Q[0],P=Q[1],q=s.a.useState(!1),F=Object(l.a)(q,2),D=F[0],z=F[1],Y=s.a.useState(!1),Z=Object(l.a)(Y,2),M=Z[0],K=Z[1],J=s.a.useState({}),X=Object(l.a)(J,2),$=X[0],ee=X[1],te=s.a.useState({name:"",link:""}),ne=Object(l.a)(te,2),ae=ne[0],se=ne[1],oe=s.a.useState({avatar:B,email:"",_id:""}),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],le=s.a.useState([]),ue=Object(l.a)(le,2),de=ue[0],be=ue[1],me=s.a.useState(!1),he=Object(l.a)(me,2),pe=he[0],je=he[1];function fe(){e("/")}function ge(){j(!1),I(!1),V(!1),P(!1),se({name:"",link:""}),ee({})}return s.a.useEffect((function(){je(!0),S.user().then((function(e){re((function(t){return Object(r.a)(Object(r.a)({},t),{},{email:e.data.email})})),o(!0),fe()})).catch((function(e){400===e.status?console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"):401===e.status?console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d"):console.log("Error: ".concat(e.status)),o(!1)})),Promise.all([w.getUserInfo(),w.getInitialCards()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];re((function(e){return Object(r.a)(Object(r.a)({},e),{},{avatar:n.avatar,name:n.name,about:n.about,_id:n._id})})),be(a)})).catch((function(e){console.log(e)})).finally((function(){je(!1)}))}),[]),Object(h.jsxs)(b.Provider,{value:ce,children:[Object(h.jsx)(p,{onLogout:function(){S.logout(),o(!1),e("/signin")}}),Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{path:"/signup",element:Object(h.jsx)(N,{onRegister:function(e){je(!0),S.register(e).then((function(e){K(!0),z(!0)})).catch((function(e){400===e.status?console.log("\u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):console.log("Error: ".concat(e.status)),K(!1),z(!0)})).finally((function(){je(!1)}))}})}),Object(h.jsx)(d.b,{exact:!0,path:"/",element:Object(h.jsxs)(T,{isLoggedIn:a,children:[Object(h.jsx)(f,{onEditProfile:function(){I(!0)},onEditAvatar:function(){j(!0)},onAddPlace:function(){V(!0)},onCardClick:function(e){se(e)},cards:de,onCardLike:function(e){je(!0),(e.likes.some((function(e){return e._id===ce._id}))?w.deleteLike(e._id):w.putLike(e._id)).then((function(t){be((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)})).finally((function(){je(!1)}))},onCardDelete:function(e){ee({_id:e._id}),P(!0)}}),Object(h.jsx)(g,{})]})}),Object(h.jsx)(d.b,{path:"/signin",element:Object(h.jsx)(L,{onLogin:function(e){je(!0),S.login(e).then((function(e){console.log(e),e.token?(localStorage.setItem("jwt",e.token),o(!0),fe()):console.log("\u043e\u0442\u0432\u0435\u0442 \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0442\u043e\u043a\u0435\u043d")})).catch((function(e){400===e.status?console.log("\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):401===e.status?console.log("\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):console.log("Error: ".concat(e.status)),K(!1),z(!0)})).finally((function(){je(!1)}))}})}),Object(h.jsx)(d.b,{path:"*",element:Object(h.jsx)(d.a,{to:"/signin"})})]}),Object(h.jsx)(v,{isOpen:E,onClose:ge,onUpdateUser:function(e){je(!0),w.updateUserInfo(e).then((function(e){re((function(t){return Object(r.a)(Object(r.a)({},t),{},{name:e.name,about:e.about})})),ge()})).catch((function(e){console.log(e)})).finally((function(){je(!1)}))},isLoading:pe}),Object(h.jsx)(_,{isOpen:m,onClose:ge,onUpdateAvatar:function(e){je(!0),w.updateAvatar(e).then((function(e){re((function(t){return Object(r.a)(Object(r.a)({},t),{},{avatar:e.avatar})})),ge()})).catch((function(e){console.log(e)})).finally((function(){je(!1)}))},isLoading:pe}),Object(h.jsx)(C,{isOpen:G,onClose:ge,onUpdateCards:function(e){je(!0),w.insertNewCard(e).then((function(e){be([e].concat(Object(c.a)(de))),ge()})).catch((function(e){console.log(e)})).finally((function(){je(!1)}))},isLoading:pe}),Object(h.jsx)(A,{isOpen:R,onClose:ge,onSubmit:function(e){je(!0),w.deletePhoto(e._id).then((function(){be((function(t){return t.filter((function(t){return t._id!==e._id}))})),ge()})).catch((function(e){console.log(e)})).finally((function(){je(!1)}))},isLoading:pe,cardToDelete:$}),Object(h.jsx)(k,{status:M,onClose:function(){M?(z(!1),e("/signin")):z(!1)},isOpen:D}),Object(h.jsx)(O,{card:ae,onClose:ge})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),o(e),i(e)}))};n(19);i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(u.a,{children:Object(h.jsx)(U,{})})}),document.getElementById("root")),W()}},[[20,1,2]]]);
//# sourceMappingURL=main.c1dc0943.chunk.js.map